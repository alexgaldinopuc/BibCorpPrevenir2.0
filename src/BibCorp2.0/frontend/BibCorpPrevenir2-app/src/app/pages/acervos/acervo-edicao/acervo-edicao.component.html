<div class="container-fluid">
  <form class="my-2 " [formGroup]="formAcervo">
    <div class="card rounded mat-elevation-z4">
      <div class="card-header rounded text-center text-white bcp-bg-secondary">
        <h1 class="mt-2">Formulário de Acervos</h1>
      </div>
      <div class="card-body p-0 mt-1 bg-white  text-black">
        <div class="row m-0 mb-1">
          <div fxFlex="67">
            @if (editMode) {
            <h4 class="h4 border-bottom mt-2">Dados do Acervo</h4>

            <div class="card bcp-bg-white-010 text-black p-2">
              <div class="h7 mt-2">Dados de Controle</div>
              <div class="mt-1">
                <mat-form-field fxFlex="25" class="p-1" disabled>
                  <mat-label>Acervo Id:</mat-label>
                  <input matInput type="text" formControlName="acervoId" [ngClass]="fieldValidator(ctrF.acervoId)"
                    readonly>
                  <mat-error class="invalid-feedback">{{messageReturned(ctrF.acervoId, '')}}</mat-error>
                </mat-form-field>
                <mat-form-field fxFlex="25" class="p-1">
                  <mat-label>Qtde Acervos:</mat-label>
                  <input matInput type="text" formControlName="qtdeAcervos" [ngClass]="fieldValidator(ctrF.qtdeAcervos)"
                    readonly>
                  <mat-error class="invalid-feedback">{{messageReturned(ctrF.qtdeAcervos, '')}}</mat-error>
                </mat-form-field>
                <mat-form-field fxFlex="25" class="p-1">
                  <mat-label>Qtd Disponível:</mat-label>
                  <input matInput type="text" formControlName="qtdeDisponivel"
                    [ngClass]="fieldValidator(ctrF.qtdeDisponivel)" readonly>
                  <mat-error class="invalid-feedback">{{messageReturned(ctrF.qtdeDisponivel, '')}}</mat-error>
                </mat-form-field>
                <mat-form-field fxFlex="25" class="p-1">
                  <mat-label>Qtd Emprestado:</mat-label>
                  <input matInput type="text" formControlName="qtdeEmprestada"
                    [ngClass]="fieldValidator(ctrF.qtdeEmprestada)" readonly>
                  <mat-error class="invalid-feedback">{{messageReturned(ctrF.qtdeEmprestada, '')}}</mat-error>
                </mat-form-field>
              </div>
            </div>
            }

            <h4 class="border-bottom mt-2">Dados de Cadastro</h4>

            <div class="form-row d-md-flex">
              <mat-form-field fxFlex="50" class="p-1">
                <mat-label>Número ISBN:</mat-label>
                <input matInput type="text" formControlName="isbn" [ngClass]="fieldValidator(ctrF.isbn)"
                  (change)="getPatrimonios()">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.isbn, '')}}</mat-error>
              </mat-form-field>
              <mat-form-field fxFlex="50" class="p-1">
                <mat-label>Genero:</mat-label>
                <input matInput type="text" formControlName="genero" [ngClass]="fieldValidator(ctrF.genero)">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.genero,
                  '')}}</mat-error>
                </mat-form-field>
              </div>
              <div class="form-row d-md-flex">
              <mat-form-field fxFlex="100"  class="p-1">
                <mat-label>Link com a imagem do livro</mat-label>
                <input matInput type="text" formControlName="capaUrl" [ngClass]="fieldValidator(ctrF.capaUrl)">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.capaUrl, '')}}</mat-error>
              </mat-form-field>
            </div>
            <div class="form-row d-md-flex">
              <mat-form-field fxFlex="50" class="p-1">
                <mat-label>Título do Livro:</mat-label>
                <input matInput type="text" formControlName="titulo" [ngClass]="fieldValidator(ctrF.titulo)">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.titulo, '')}}</mat-error>
              </mat-form-field>
              <mat-form-field fxFlex="50" class="p-1">
                <mat-label>Sub-título do livro:</mat-label>
                <input matInput type="text" formControlName="subTitulo" [ngClass]="fieldValidator(ctrF.subTitulo)">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.subTitulo, '')}}</mat-error>
              </mat-form-field>
            </div>
            <div class="form-row d-md-flex">
              <mat-form-field fxFlex="100" class="col p-1">
                <mat-label>Autor(es):</mat-label>
                <input matInput type="text" formControlName="autor" [ngClass]="fieldValidator(ctrF.autor)">
                <mat-error class="invalid-feedback">{{messageReturned(ctrF.autor, '')}}</mat-error>
              </mat-form-field>
            </div>
          </div>

          <div fxFlex="33" class="m-0 p-0 mt-5">
            <div class="aligns-self-center text-center">
              <img class="bcp-imagem-lateral" [src]="capaPatrimonio" alt="Card imagem imageDetail">
            </div>
          </div>
          <div class="form-row d-md-flex">
            <mat-form-field fxFlex="100" class="p-1">
              <mat-label>Resumo</mat-label>
              <textarea matInput type="text"  formControlName="resumo"
                [ngClass]="fieldValidator(ctrF.resumo)" ></textarea>
              <mat-error class="invalid-feedback">{{messageReturned(ctrF.resumo, '')}}</mat-error>
            </mat-form-field>
          </div>
          <div class="form-row d-md-flex">
          </div>
          <div class="form-row d-md-flex">
            <mat-form-field fxFlex="30" class="p-1">
              <mat-label>Ano Publicacao:</mat-label>
              <input matInput type="text" formControlName="anoPublicacao"
                [ngClass]="fieldValidator(ctrF.anoPublicacao)">
              <mat-error class="invalid-feedback">{{messageReturned(ctrF.anoPublicacao, '')}}</mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="30" class="p-1">
              <mat-label>Edição:</mat-label>
              <input matInput type="text" formControlName="edicao" [ngClass]="fieldValidator(ctrF.edicao)">
              <mat-error class="invalid-feedback">{{messageReturned(ctrF.edicao, '')}}</mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="30" class="p-1">
              <mat-label>Editora:</mat-label>
              <input matInput type="text" formControlName="editora" [ngClass]="fieldValidator(ctrF.editora)">
              <mat-error class="invalid-feedback">{{messageReturned(ctrF.editora, '')}}</mat-error>
            </mat-form-field>
            <mat-form-field fxFlex="30" class="p-1">
              <mat-label>Quantidade de Páginas:</mat-label>
              <input matInput type="number" formControlName="qtdPaginas" [ngClass]="fieldValidator(ctrF.qtdPaginas)">
              <mat-error class="invalid-feedback">{{messageReturned(ctrF.qtdPaginas, '')}}</mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="card-footer bcp-bg-secondary mt-1 ">
        <div class="d-flex ">
          <button class="btn btn-danger ms-auto mx-1" (click)="clearForm()">
            Cancelar
          </button>
          <button class="btn btn-primary mx-1 px-4" [disabled]="!formAcervo.valid" (click)="saveChange()">
            {{editMode ? "Salvar" : "Criar"}}
          </button>
        </div>
      </div>
    </div>
  </form>
</div>

<!-- 
<p>Form Value: {{formAcervo.value | json}}</p>
<p>Form Status: {{formAcervo.status | json}}</p> -->


